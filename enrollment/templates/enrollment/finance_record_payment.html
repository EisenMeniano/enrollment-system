{% extends "base.html" %}
{% block title %}Enter Payment{% endblock %}
{% block content %}
<div class="card">
  <h2>Enter Student Payment</h2>
  <p><strong>Student:</strong> {{ enlistment.student.student_number }}</p>
  <p><strong>Enlistment:</strong> #{{ enlistment.id }} ({{ enlistment.school_year }} - {{ enlistment.semester }})</p>
  {% if payment %}
    <p><strong>Enlistment Fee Due:</strong> {{ payment.enlistment_amount }}</p>
    <p><strong>Tuition Fee Due:</strong> {{ payment.tuition_amount }}</p>
    <p><strong>Enlistment Fee Paid:</strong> {{ payment.enlistment_paid_amount }}</p>
    <p><strong>Tuition Fee Paid:</strong> {{ payment.tuition_paid_amount }}</p>
    {% if payment.submitted_amount %}
      <p><strong>Submitted by Student:</strong> {{ payment.submitted_amount }}</p>
    {% endif %}
    <p><strong>Payment Status:</strong> {{ payment.get_status_display }}</p>
  {% endif %}
  <p>Review and approve student payment. Tuition payment should be approved only after enlistment fee is fully paid.</p>
  <form method="post">
    {% csrf_token %}
    <p>
      <label for="max_downpayment_term"><strong>Maximum Downpayment Term</strong></label>
      <select id="max_downpayment_term" name="max_downpayment_term">
        <option value="PRELIM">Prelim</option>
        <option value="MIDTERM">Midterm</option>
        <option value="FINAL">Final</option>
      </select>
    </p>
    {{ form.as_p }}
    <button class="btn" type="submit">Approve Payment</button>
    <a class="btn secondary" href="{% url 'enrollment:enlistment_detail' enlistment.id %}">Back</a>
  </form>
</div>
{% endblock %}
